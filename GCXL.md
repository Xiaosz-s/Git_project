由于2023陕西省工程训练创新大赛取消了原有的黑线，所以需要考虑全图导航的问题，下面仅给出大致思路。
全局定位使用闭环步进电机完成，陀螺仪调整姿态，由于陀螺仪Yaw漂移问题和麦轮打滑问题，所以用视觉来消除陀螺仪和步进电机误差
步进电机的误差只须每次到达一个区域后重新计数即可保证其精度够用（e.g.开始到物料区，物料区到粗加工区）

我具体说明一下如何用视觉消除误差

方法一：用视觉识别赛道灰色和黄色分解线，转化成角度，来矫正车身姿态即可；具体做法就是边缘检测再拟合直线处理就行。
（该方法需要多一个摄像头，或使用识别圆环的那一个摄像头）

方法二：视觉直接识别圆环靶心的横竖线；具体做法，腐蚀膨胀后再二值化，图像变为圆环中心出延伸出一个十字，仅须从圆心（centerx,centery）,确定圆环最小圆半径r后，
用两点（centerx-1/3*r,centery-1/3*y）,（centerx+1/3*r,centery-1/3*y）,向下扫线，找出两黑白分界点即可，再求两点斜率转成角度。

方法三（我们所使用的方法）：全程会将物料放入圆环三次， 码垛一次，每次依次放三个物料，每次放置时利用车身都会纠正的这个特点；
第一次纠正后，直接向右向左平移放置下一个物料，刚识别到圆后，可以获取y方向的误差；
e.g.车身向右倾斜两度，那么向右平移后y轴方向和圆心偏移（Real_centerY-Set_centerY）为正值,反之为负值，
平移距离已知即可通过反正切完成角度的补偿

if(step2!=0)            //若平移距离不为0
{
  Error_angle -= atan((float)((float)First_errorY/((float)step2*16.0f))) * (180.0f / M_PI);
}
//atan反正切函数,First_errorY记录了平移后第一次看到圆心时y轴误差，16.0f为需要调整的系数，Error_angle根据极性累加或者累减即可

Use_angle=Real_angle+Error_angle;      //直接进行补偿
